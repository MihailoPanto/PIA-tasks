{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Proposal } from '../models/proposal';\nimport { User } from '../models/user';\nexport let VisitorStartComponent = class VisitorStartComponent {\n  constructor(animalService, router, proposalService) {\n    this.animalService = animalService;\n    this.router = router;\n    this.proposalService = proposalService;\n    this.animals = [];\n    this.proposal = new Proposal();\n    this.user = new User();\n    this.proposals = [];\n    this.votes = [];\n  }\n  ngOnInit() {\n    this.getAnimals();\n    this.user = JSON.parse(localStorage.getItem(\"loggedUser\"));\n    this.getProposals();\n  }\n  getAnimals() {\n    this.animalService.getAnimals().subscribe(data => {\n      this.animals = data;\n    });\n  }\n  sortAnimals() {\n    this.animals = this.animalService.sortByWeight(this.animals);\n  }\n  logout() {\n    localStorage.setItem(\"loggedUser\", null);\n    this.router.navigate([\"\"]);\n  }\n  addProposal() {\n    this.proposal.visitor = this.user.username;\n    this.proposalService.addProposal(this.proposal).subscribe(data => {\n      if (data == 1) {\n        alert(\"Uspesno dodavanje!\");\n      }\n    });\n  }\n  getProposals() {\n    this.proposalService.getProposals().subscribe(data => {\n      this.proposals = data;\n    });\n  }\n  getVotes() {\n    this.proposalService.getVotes(this.user).subscribe(data => {\n      this.votes = data;\n    });\n  }\n  vote(idp) {\n    this.proposalService.vote(idp, this.user.username).subscribe(data => {\n      if (data == 1) {\n        alert(\"Lajk\");\n      }\n    });\n  }\n};\nVisitorStartComponent = __decorate([Component({\n  selector: 'app-visitor-start',\n  templateUrl: './visitor-start.component.html',\n  styleUrls: ['./visitor-start.component.css']\n})], VisitorStartComponent);","map":{"version":3,"names":["Component","Proposal","User","VisitorStartComponent","constructor","animalService","router","proposalService","animals","proposal","user","proposals","votes","ngOnInit","getAnimals","JSON","parse","localStorage","getItem","getProposals","subscribe","data","sortAnimals","sortByWeight","logout","setItem","navigate","addProposal","visitor","username","alert","getVotes","vote","idp","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Korisnik\\Desktop\\github\\PIA-tasks\\2020-2\\frontend\\src\\app\\visitor-start\\visitor-start.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AnimalsService } from '../services/animals.service';\nimport { Animal } from '../models/animal';\nimport { Router } from '@angular/router';\nimport { Proposal } from '../models/proposal';\nimport { ProposalsService } from '../services/proposals.service';\nimport { User } from '../models/user';\n\n@Component({\n  selector: 'app-visitor-start',\n  templateUrl: './visitor-start.component.html',\n  styleUrls: ['./visitor-start.component.css']\n})\nexport class VisitorStartComponent implements OnInit{\n\n  constructor(private animalService: AnimalsService,private router: Router, private proposalService: ProposalsService){}\n\n  ngOnInit(): void {\n    this.getAnimals();\n    this.user = JSON.parse(localStorage.getItem(\"loggedUser\"));\n    this.getProposals();\n  }\n\n  animals: Animal[] = [];\n\n  getAnimals(){\n    this.animalService.getAnimals().subscribe(\n      data=>{\n        this.animals = data;\n      }\n    );\n  }\n\n  sortAnimals(){\n    this.animals = this.animalService.sortByWeight(this.animals);\n  }\n\n  logout(){\n    localStorage.setItem(\"loggedUser\", null);\n    this.router.navigate([\"\"]);\n  }\n\n  proposal: Proposal = new Proposal();\n  user: User = new User();\n\n  addProposal(){\n    this.proposal.visitor = this.user.username;\n    this.proposalService.addProposal(this.proposal).subscribe(\n      data=>{\n        if(data==1){\n          alert(\"Uspesno dodavanje!\");\n        }\n      }\n    )\n  }\n\n  proposals: Proposal[] = [];\n  votes: number[] = [];\n\n  getProposals(){\n    this.proposalService.getProposals().subscribe(\n      data=>{\n        this.proposals = data;\n      }\n    )\n  }\n\n  getVotes(){\n    this.proposalService.getVotes(this.user).subscribe(\n      data=>{\n        this.votes = data;\n      }\n    )\n  }\n\n  vote(idp: number){\n    this.proposalService.vote(idp, this.user.username).subscribe(\n      data=>{\n        if(data==1){\n          alert(\"Lajk\")\n        }\n      }\n    )\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAIjD,SAASC,QAAQ,QAAQ,oBAAoB;AAE7C,SAASC,IAAI,QAAQ,gBAAgB;AAO9B,WAAMC,qBAAqB,GAA3B,MAAMA,qBAAqB;EAEhCC,YAAoBC,aAA6B,EAASC,MAAc,EAAUC,eAAiC;IAA/F,KAAAF,aAAa,GAAbA,aAAa;IAAyB,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,eAAe,GAAfA,eAAe;IAQjG,KAAAC,OAAO,GAAa,EAAE;IAmBtB,KAAAC,QAAQ,GAAa,IAAIR,QAAQ,EAAE;IACnC,KAAAS,IAAI,GAAS,IAAIR,IAAI,EAAE;IAavB,KAAAS,SAAS,GAAe,EAAE;IAC1B,KAAAC,KAAK,GAAa,EAAE;EA1CiG;EAErHC,QAAQA,CAAA;IACN,IAAI,CAACC,UAAU,EAAE;IACjB,IAAI,CAACJ,IAAI,GAAGK,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC;IAC1D,IAAI,CAACC,YAAY,EAAE;EACrB;EAIAL,UAAUA,CAAA;IACR,IAAI,CAACT,aAAa,CAACS,UAAU,EAAE,CAACM,SAAS,CACvCC,IAAI,IAAE;MACJ,IAAI,CAACb,OAAO,GAAGa,IAAI;IACrB,CAAC,CACF;EACH;EAEAC,WAAWA,CAAA;IACT,IAAI,CAACd,OAAO,GAAG,IAAI,CAACH,aAAa,CAACkB,YAAY,CAAC,IAAI,CAACf,OAAO,CAAC;EAC9D;EAEAgB,MAAMA,CAAA;IACJP,YAAY,CAACQ,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC;IACxC,IAAI,CAACnB,MAAM,CAACoB,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EAC5B;EAKAC,WAAWA,CAAA;IACT,IAAI,CAAClB,QAAQ,CAACmB,OAAO,GAAG,IAAI,CAAClB,IAAI,CAACmB,QAAQ;IAC1C,IAAI,CAACtB,eAAe,CAACoB,WAAW,CAAC,IAAI,CAAClB,QAAQ,CAAC,CAACW,SAAS,CACvDC,IAAI,IAAE;MACJ,IAAGA,IAAI,IAAE,CAAC,EAAC;QACTS,KAAK,CAAC,oBAAoB,CAAC;;IAE/B,CAAC,CACF;EACH;EAKAX,YAAYA,CAAA;IACV,IAAI,CAACZ,eAAe,CAACY,YAAY,EAAE,CAACC,SAAS,CAC3CC,IAAI,IAAE;MACJ,IAAI,CAACV,SAAS,GAAGU,IAAI;IACvB,CAAC,CACF;EACH;EAEAU,QAAQA,CAAA;IACN,IAAI,CAACxB,eAAe,CAACwB,QAAQ,CAAC,IAAI,CAACrB,IAAI,CAAC,CAACU,SAAS,CAChDC,IAAI,IAAE;MACJ,IAAI,CAACT,KAAK,GAAGS,IAAI;IACnB,CAAC,CACF;EACH;EAEAW,IAAIA,CAACC,GAAW;IACd,IAAI,CAAC1B,eAAe,CAACyB,IAAI,CAACC,GAAG,EAAE,IAAI,CAACvB,IAAI,CAACmB,QAAQ,CAAC,CAACT,SAAS,CAC1DC,IAAI,IAAE;MACJ,IAAGA,IAAI,IAAE,CAAC,EAAC;QACTS,KAAK,CAAC,MAAM,CAAC;;IAEjB,CAAC,CACF;EACH;CAED;AAxEY3B,qBAAqB,GAAA+B,UAAA,EALjClC,SAAS,CAAC;EACTmC,QAAQ,EAAE,mBAAmB;EAC7BC,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,+BAA+B;CAC5C,CAAC,C,EACWlC,qBAAqB,CAwEjC"},"metadata":{},"sourceType":"module","externalDependencies":[]}